/*
 * global.c
 *
 *  Created on: Nov 2, 2022
 *      Author: HELLO SON
 */
#include "global.h"
#include "main.h"
int status=0;
int status2=0;
int man_time=10000;
int blink_time=500;

void display7SEG (int time)
{
	if(time==0)
	{
		HAL_GPIO_WritePin(P_1_GPIO_Port, P_1_Pin, RESET);
		HAL_GPIO_WritePin(P_2_GPIO_Port, P_2_Pin, RESET);
		HAL_GPIO_WritePin(P_3_GPIO_Port, P_3_Pin, RESET);
		HAL_GPIO_WritePin(P_4_GPIO_Port, P_4_Pin, RESET);
		HAL_GPIO_WritePin(P_5_GPIO_Port, P_5_Pin, RESET);
		HAL_GPIO_WritePin(P_6_GPIO_Port, P_6_Pin, RESET);
		HAL_GPIO_WritePin(P_7_GPIO_Port, P_7_Pin, SET);
	}
	else if(time==1)
	{
		HAL_GPIO_WritePin(P_1_GPIO_Port, P_1_Pin, SET);
		HAL_GPIO_WritePin(P_2_GPIO_Port, P_2_Pin, RESET);
		HAL_GPIO_WritePin(P_3_GPIO_Port, P_3_Pin, RESET);
		HAL_GPIO_WritePin(P_4_GPIO_Port, P_4_Pin, SET);
		HAL_GPIO_WritePin(P_5_GPIO_Port, P_5_Pin, SET);
		HAL_GPIO_WritePin(P_6_GPIO_Port, P_6_Pin, SET);
		HAL_GPIO_WritePin(P_7_GPIO_Port, P_7_Pin, SET);
	}
	else if(time==2)
	{
		HAL_GPIO_WritePin(P_1_GPIO_Port, P_1_Pin, RESET);
		HAL_GPIO_WritePin(P_2_GPIO_Port, P_2_Pin, RESET);
		HAL_GPIO_WritePin(P_3_GPIO_Port, P_3_Pin, SET);
		HAL_GPIO_WritePin(P_4_GPIO_Port, P_4_Pin, RESET);
		HAL_GPIO_WritePin(P_5_GPIO_Port, P_5_Pin, RESET);
		HAL_GPIO_WritePin(P_6_GPIO_Port, P_6_Pin, SET);
		HAL_GPIO_WritePin(P_7_GPIO_Port, P_7_Pin, RESET);
	}
	else if(time==3)
	{
		HAL_GPIO_WritePin(P_1_GPIO_Port, P_1_Pin, RESET);
		HAL_GPIO_WritePin(P_2_GPIO_Port, P_2_Pin, RESET);
		HAL_GPIO_WritePin(P_3_GPIO_Port, P_3_Pin, RESET);
		HAL_GPIO_WritePin(P_4_GPIO_Port, P_4_Pin, RESET);
		HAL_GPIO_WritePin(P_5_GPIO_Port, P_5_Pin, SET);
		HAL_GPIO_WritePin(P_6_GPIO_Port, P_6_Pin, SET);
		HAL_GPIO_WritePin(P_7_GPIO_Port, P_7_Pin, RESET);
	}
	else if(time==4)
	{
		HAL_GPIO_WritePin(P_1_GPIO_Port, P_1_Pin, SET);
		HAL_GPIO_WritePin(P_2_GPIO_Port, P_2_Pin, RESET);
		HAL_GPIO_WritePin(P_3_GPIO_Port, P_3_Pin, RESET);
		HAL_GPIO_WritePin(P_4_GPIO_Port, P_4_Pin, SET);
		HAL_GPIO_WritePin(P_5_GPIO_Port, P_5_Pin, SET);
		HAL_GPIO_WritePin(P_6_GPIO_Port, P_6_Pin, RESET);
		HAL_GPIO_WritePin(P_7_GPIO_Port, P_7_Pin, RESET);
	}
	else if(time==5)
	{
		HAL_GPIO_WritePin(P_1_GPIO_Port, P_1_Pin, RESET);
		HAL_GPIO_WritePin(P_2_GPIO_Port, P_2_Pin, SET);
		HAL_GPIO_WritePin(P_3_GPIO_Port, P_3_Pin, RESET);
		HAL_GPIO_WritePin(P_4_GPIO_Port, P_4_Pin, RESET);
		HAL_GPIO_WritePin(P_5_GPIO_Port, P_5_Pin, SET);
		HAL_GPIO_WritePin(P_6_GPIO_Port, P_6_Pin, RESET);
		HAL_GPIO_WritePin(P_7_GPIO_Port, P_7_Pin, RESET);
	}
	else if(time==6)
	{
		HAL_GPIO_WritePin(P_1_GPIO_Port, P_1_Pin, RESET);
		HAL_GPIO_WritePin(P_2_GPIO_Port, P_2_Pin, SET);
		HAL_GPIO_WritePin(P_3_GPIO_Port, P_3_Pin, RESET);
		HAL_GPIO_WritePin(P_4_GPIO_Port, P_4_Pin, RESET);
		HAL_GPIO_WritePin(P_5_GPIO_Port, P_5_Pin, RESET);
		HAL_GPIO_WritePin(P_6_GPIO_Port, P_6_Pin, RESET);
		HAL_GPIO_WritePin(P_7_GPIO_Port, P_7_Pin, RESET);
	}
	else if(time==7)
	{
		HAL_GPIO_WritePin(P_1_GPIO_Port, P_1_Pin, RESET);
		HAL_GPIO_WritePin(P_2_GPIO_Port, P_2_Pin, RESET);
		HAL_GPIO_WritePin(P_3_GPIO_Port, P_3_Pin, RESET);
		HAL_GPIO_WritePin(P_4_GPIO_Port, P_4_Pin, SET);
		HAL_GPIO_WritePin(P_5_GPIO_Port, P_5_Pin, SET);
		HAL_GPIO_WritePin(P_6_GPIO_Port, P_6_Pin, SET);
		HAL_GPIO_WritePin(P_7_GPIO_Port, P_7_Pin, SET);
	}
	else if(time==8)
	{
		HAL_GPIO_WritePin(P_1_GPIO_Port, P_1_Pin, RESET);
		HAL_GPIO_WritePin(P_2_GPIO_Port, P_2_Pin, RESET);
		HAL_GPIO_WritePin(P_3_GPIO_Port, P_3_Pin, RESET);
		HAL_GPIO_WritePin(P_4_GPIO_Port, P_4_Pin, RESET);
		HAL_GPIO_WritePin(P_5_GPIO_Port, P_5_Pin, RESET);
		HAL_GPIO_WritePin(P_6_GPIO_Port, P_6_Pin, RESET);
		HAL_GPIO_WritePin(P_7_GPIO_Port, P_7_Pin, RESET);
	}
	else if(time==9)
	{
		HAL_GPIO_WritePin(P_1_GPIO_Port, P_1_Pin, RESET);
		HAL_GPIO_WritePin(P_2_GPIO_Port, P_2_Pin, RESET);
		HAL_GPIO_WritePin(P_3_GPIO_Port, P_3_Pin, RESET);
		HAL_GPIO_WritePin(P_4_GPIO_Port, P_4_Pin, RESET);
		HAL_GPIO_WritePin(P_5_GPIO_Port, P_5_Pin, SET);
		HAL_GPIO_WritePin(P_6_GPIO_Port, P_6_Pin, RESET);
		HAL_GPIO_WritePin(P_7_GPIO_Port, P_7_Pin, RESET);
	}
}
int led_buffer [4];
void update7SEG (int index) {
	switch (index)	{
	case 0:
		HAL_GPIO_WritePin(EN0_GPIO_Port, EN0_Pin, RESET);
		HAL_GPIO_WritePin(EN1_GPIO_Port, EN1_Pin, SET);
		HAL_GPIO_WritePin(EN2_GPIO_Port, EN2_Pin, SET);
		HAL_GPIO_WritePin(EN3_GPIO_Port, EN3_Pin, SET);
		display7SEG(led_buffer[0]);
		break;
	case 1:
		HAL_GPIO_WritePin(EN0_GPIO_Port, EN0_Pin, SET);
		HAL_GPIO_WritePin(EN1_GPIO_Port, EN1_Pin, RESET);
		HAL_GPIO_WritePin(EN2_GPIO_Port, EN2_Pin, SET);
		HAL_GPIO_WritePin(EN3_GPIO_Port, EN3_Pin, SET);
		display7SEG(led_buffer[1]);
		break;
	case 2:
		HAL_GPIO_WritePin(EN0_GPIO_Port, EN0_Pin, SET);
		HAL_GPIO_WritePin(EN1_GPIO_Port, EN1_Pin, SET);
		HAL_GPIO_WritePin(EN2_GPIO_Port, EN2_Pin, RESET);
		HAL_GPIO_WritePin(EN3_GPIO_Port, EN3_Pin, SET);
		display7SEG(led_buffer[2]);
		break;
	case 3:
		HAL_GPIO_WritePin(EN0_GPIO_Port, EN0_Pin, SET);
		HAL_GPIO_WritePin(EN1_GPIO_Port, EN1_Pin, SET);
		HAL_GPIO_WritePin(EN2_GPIO_Port, EN2_Pin, SET);
		HAL_GPIO_WritePin(EN3_GPIO_Port, EN3_Pin, RESET);
		display7SEG(led_buffer[3]);
		break;
	default:
		break;
	}
 }
void updatebuffer(int number1, int number2)
{
	led_buffer[0]=number1/10;
	led_buffer[1]=number1%10;

	led_buffer[2]=number2/10;
	led_buffer[3]=number2%10;
}
